!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return n};var t,n={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},l=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",s=c.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(t){f=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof x?t:x,a=Object.create(o.prototype),c=new L(r||[]);return i(a,"_invoke",{value:E(e,n,c)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=d;var v="suspendedStart",g="suspendedYield",h="executing",m="completed",y={};function x(){}function b(){}function z(){}var w={};f(w,l,(function(){return this}));var _=Object.getPrototypeOf,S=_&&_(_(M([])));S&&S!==r&&a.call(S,l)&&(w=S);var k=z.prototype=x.prototype=Object.create(w);function C(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function I(t,n){function r(o,i,c,l){var u=p(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==e(f)&&a.call(f,"__await")?n.resolve(f.__await).then((function(e){r("next",e,c,l)}),(function(e){r("throw",e,c,l)})):n.resolve(f).then((function(e){s.value=e,c(s)}),(function(e){return r("throw",e,c,l)}))}l(u.arg)}var o;i(this,"_invoke",{value:function(e,t){function a(){return new n((function(n,o){r(e,t,n,o)}))}return o=o?o.then(a,a):a()}})}function E(e,n,r){var o=v;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:t,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var l=D(c,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===v)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=p(e,n,r);if("normal"===u.type){if(o=r.done?m:g,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function D(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,D(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=p(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function M(n){if(n||""===n){var r=n[l];if(r)return r.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var o=-1,i=function e(){for(;++o<n.length;)if(a.call(n,o))return e.value=n[o],e.done=!1,e;return e.value=t,e.done=!0,e};return i.next=i}}throw new TypeError(e(n)+" is not iterable")}return b.prototype=z,i(k,"constructor",{value:z,configurable:!0}),i(z,"constructor",{value:b,configurable:!0}),b.displayName=f(z,s,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,z):(e.__proto__=z,f(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},n.awrap=function(e){return{__await:e}},C(I.prototype),f(I.prototype,u,(function(){return this})),n.AsyncIterator=I,n.async=function(e,t,r,o,a){void 0===a&&(a=Promise);var i=new I(d(e,t,r,o),a);return n.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(k),f(k,s,"Generator"),f(k,l,(function(){return this})),f(k,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=M,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:M(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},n}function a(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){a(i,r,o,c,l,"next",e)}function l(e){a(i,r,o,c,l,"throw",e)}c(void 0)}))}}System.register(["./index-legacy-kyhTK4IK.js"],(function(r,a){"use strict";var c,l,u,s,f,d,p,v,g,h,m,y,x,b,z,w,_,S,k,C,I,E,D,O,P,L,M,N,j,A,G,T,F,U,H,q,B,Y,J,$,Q,R,V,W,K,X,Z,ee,te,ne,re,oe,ae,ie,ce;return{setters:[function(e){c=e._,l=e.a,u=e.r,s=e.o,f=e.af,d=e.ag,p=e.n,v=e.d,g=e.p,h=e.s,m=e.u,y=e.y,x=e.I,b=e.v,z=e.x,w=e.a7,_=e.a2,S=e.H,k=e.D,C=e.z,I=e.L,E=e.N,D=e.O,O=e.Q,P=e.J,L=e.R,M=e.a8,N=e.ah,j=e.P,A=e.ai,G=e.t,T=e.G,F=e.l,U=e.m,H=e.a1,q=e.a6,B=e.b,Y=e.aj,J=e.U,$=e.f,Q=e.e,R=e.q,V=e.i,W=e.w,K=e.h,X=e.ak,Z=e.E,ee=e.F,te=e.al,ne=e.am,re=e.K,oe=e.an,ae=e.ao,ie=e.a0,ce=e.ap}],execute:function(){var a=document.createElement("style");a.textContent="ion-card[data-v-385d70b4]{margin:1rem 0}ion-card-title[data-v-385d70b4]{font-size:1.5rem}.prenotazione-section[data-v-385d70b4],.cliente-section[data-v-385d70b4]{margin-bottom:1rem}.actions-section[data-v-385d70b4]{text-align:center}ion-modal[data-v-385d70b4]{--height: 80%;--width: 90%;--border-radius: 16px;--box-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1)}ion-modal[data-v-385d70b4]::part(backdrop){background:#d1d5db;opacity:1}ion-button[color=danger][data-v-385d70b4]{margin-top:1rem}.popover-content[data-v-47f1b6f8]{padding:16px;font-family:Arial,sans-serif}.prenotazione-item[data-v-47f1b6f8]{margin-bottom:12px;padding:10px;border:1px solid #e0e0e0;border-radius:5px;background-color:#f9f9f9}.prenotazione-details[data-v-47f1b6f8]{font-size:14px;color:#333}.div-contenitore-giorni[data-v-47f1b6f8]{display:flex;overflow:scroll}.div-contenitore-orario[data-v-47f1b6f8]{display:flex;align-items:center;box-shadow:0 2px 4px var(--ion-color-secondary);border-radius:10px;margin-top:10px;justify-content:stretch;align-content:stretch}.div-orario[data-v-47f1b6f8]{border-radius:10px;display:flex;align-items:center;padding:5px;background-color:#9acd32;min-height:50px;font-size:small;text-align:center}.div-giorno[data-v-47f1b6f8]{display:flex;flex-direction:column;justify-content:space-between;margin:5px;text-align:center;min-height:50px;cursor:pointer;border-radius:8px;padding:10px;box-shadow:0 2px 4px var(--ion-color-secondary);transition:background-color .3s ease}.giorno-selezionato[data-v-47f1b6f8]{display:flex;flex-direction:column;justify-content:space-between;background-color:var(--ion-color-secondary);margin:5px;text-align:center;min-height:50px;cursor:pointer;border-radius:8px;padding:10px;box-shadow:0 2px 4px rgba(0,0,0,.1);transition:background-color .3s ease}.div-orario-prenotato[data-v-47f1b6f8]{border-radius:10px;display:flex;padding:5px;align-items:center;font-size:small;background-color:#cd3232;min-height:50px;text-align:center}.div-navigazione-mese[data-v-47f1b6f8]{margin-top:10px;display:flex;flex-direction:row;justify-content:left;align-items:flex-start}.mese-titolo[data-v-47f1b6f8]{font-size:x-large;font-weight:700;margin-top:0}.div-informazioni-prenotazione[data-v-47f1b6f8]{display:flex;flex-direction:column;align-items:center;width:70%}.button-avanti-indietro[data-v-47f1b6f8]{margin-top:0;width:15%;font-size:x-small;height:min-content}\n/*$vite$:1*/",document.head.appendChild(a);var le={key:0},ue={class:"prenotazione-section"},se={key:0,class:"cliente-section"},fe={class:"actions-section"},de={class:"actions-section"},pe={__name:"AlertInformazioniPrenotazione",props:["isOpen","prenotazioneSelected"],emits:["close-modal","ricarica-orari"],setup:function(e,t){var n=t.emit,r=e,a=n,c=l(),B=u(null),Y=u(!1);s((function(){console.log("Modal montato")})),f((function(){console.log("Modal smontato")}));var J=function(){return console.log("Modal sta per essere presentato")},$=function(){return console.log("Modal è stato presentato")},Q=function(){console.log("Modal sta per essere chiuso"),K()},R=function(){return console.log("Modal è stato chiuso")};d((function(){r.prenotazioneSelected&&V()}));var V=function(){var e=i(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Y.value=!0,t=F(c,"Cliente",r.prenotazioneSelected.idDocumentCliente),e.next=5,U(t);case 5:(n=e.sent).exists()?(B.value=n.data(),console.log(B.value)):console.log("Errore nel recupero delle informazioni cliente"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Errore nel recupero delle informazioni del cliente:",e.t0),B.value=null;case 13:return e.prev=13,Y.value=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,9,13,16]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=i(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Y.value=!0,t=F(c,"Prenotazioni",r.prenotazioneSelected.id),e.next=5,H(t);case 5:console.log("Prenotazione eliminata con successo"),K(),a("ricarica-orari"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Errore durante l'eliminazione della prenotazione:",e.t0);case 13:return e.prev=13,Y.value=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})));return function(){return e.apply(this,arguments)}}(),K=function(){return a("close-modal")},X=function(){window.confirm("Attenzione! Bloccare questo cliente impedirà a questa email di fare prenotazioni in futuro. Sei sicuro di voler procedere?")&&Z()},Z=function(){var e=i(o().mark((function e(){var t,n,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Y.value=!0,t=F(c,"Cliente",r.prenotazioneSelected.idDocumentCliente),e.next=5,U(t);case 5:if(!(n=e.sent).exists()){e.next=18;break}return(a=n.data()).bloccato=!0,i=F(c,"ClientiBloccati",t.id),e.next=12,q(i,a);case 12:return e.next=14,H(t);case 14:console.log("Cliente spostato con successo nella collezione ClientiBloccati"),alert("Cliente bloccato con successo. Non potrà più effettuare prenotazioni."),e.next=19;break;case 18:console.log("Cliente non trovato nella collezione Cliente.");case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),console.error("Errore nel bloccare il cliente:",e.t0);case 24:return e.prev=24,Y.value=!1,e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[0,21,24,27]])})));return function(){return e.apply(this,arguments)}}();return function(e,t){return p(),v(m(T),{"is-open":r.isOpen,onClose:t[2]||(t[2]=function(e){return K()}),"backdrop-dismiss":"true",onIonModalWillPresent:J,onIonModalDidPresent:$,onIonModalWillDismiss:Q,onIonModalDidDismiss:R},{default:g((function(){return[h(m(y),null,{default:g((function(){return[h(m(x),{color:"primary"},{default:g((function(){return[h(m(b),null,{default:g((function(){return t[3]||(t[3]=[z("Dettagli")])})),_:1}),h(m(w),{slot:"end"},{default:g((function(){return[h(m(_),{onClick:t[0]||(t[0]=function(e){return K()})},{default:g((function(){return t[4]||(t[4]=[z("Chiudi")])})),_:1})]})),_:1})]})),_:1})]})),_:1}),h(m(S),{class:"ion-padding"},{default:g((function(){return[r.prenotazioneSelected||B.value?(p(),k("div",le,[C("section",ue,[h(m(I),null,{default:g((function(){return[h(m(E),null,{default:g((function(){return[h(m(D),{class:"ion-text-center"},{default:g((function(){return t[5]||(t[5]=[z("Prenotazione")])})),_:1})]})),_:1}),h(m(O),null,{default:g((function(){return[h(m(P),null,{default:g((function(){return[h(m(L),null,{default:g((function(){return[h(m(M),{class:"ion-text-bold"},{default:g((function(){return t[6]||(t[6]=[z("Servizio:")])})),_:1}),h(m(N),null,{default:g((function(){return[z(j(r.prenotazioneSelected.servizioSelezionato),1)]})),_:1})]})),_:1}),h(m(L),null,{default:g((function(){return[h(m(M),{class:"ion-text-bold"},{default:g((function(){return t[7]||(t[7]=[z("Durata:")])})),_:1}),h(m(N),null,{default:g((function(){return[z(j(r.prenotazioneSelected.durataServizioSelezionato)+" minuti",1)]})),_:1})]})),_:1}),h(m(L),null,{default:g((function(){return[h(m(M),{class:"ion-text-bold"},{default:g((function(){return t[8]||(t[8]=[z("Ora Inizio:")])})),_:1}),h(m(N),null,{default:g((function(){return[z(j(r.prenotazioneSelected.oraInizio),1)]})),_:1})]})),_:1}),h(m(L),null,{default:g((function(){return[h(m(M),{class:"ion-text-bold"},{default:g((function(){return t[9]||(t[9]=[z("Ora Fine:")])})),_:1}),h(m(N),null,{default:g((function(){return[z(j(r.prenotazioneSelected.oraFine),1)]})),_:1})]})),_:1}),h(m(L),null,{default:g((function(){return[h(m(M),{class:"ion-text-bold"},{default:g((function(){return t[10]||(t[10]=[z("Commento:")])})),_:1}),h(m(N),null,{default:g((function(){return[z(j(r.prenotazioneSelected.commento),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})]),B.value?(p(),k("section",se,[h(m(I),null,{default:g((function(){return[h(m(E),null,{default:g((function(){return[h(m(D),{class:"ion-text-center"},{default:g((function(){return t[11]||(t[11]=[z("Cliente")])})),_:1})]})),_:1}),h(m(O),null,{default:g((function(){return[h(m(P),null,{default:g((function(){return[h(m(L),null,{default:g((function(){return[h(m(M),{class:"ion-text-bold"},{default:g((function(){return t[12]||(t[12]=[z("Nome:")])})),_:1}),h(m(N),null,{default:g((function(){return[z(j(B.value.nome)+" "+j(B.value.cognome),1)]})),_:1})]})),_:1}),h(m(L),null,{default:g((function(){return[h(m(M),{class:"ion-text-bold"},{default:g((function(){return t[13]||(t[13]=[z("Cellulare:")])})),_:1}),h(m(N),null,{default:g((function(){return[z(j(B.value.cellulare),1)]})),_:1})]})),_:1}),h(m(L),null,{default:g((function(){return[h(m(M),{class:"ion-text-bold"},{default:g((function(){return t[14]||(t[14]=[z("Email:")])})),_:1}),h(m(N),null,{default:g((function(){return[z(j(B.value.email),1)]})),_:1})]})),_:1}),h(m(L),null,{default:g((function(){return[h(m(M),{class:"ion-text-bold"},{default:g((function(){return t[15]||(t[15]=[z("Città:")])})),_:1}),h(m(N),null,{default:g((function(){return[z(j(B.value.citta),1)]})),_:1})]})),_:1}),h(m(L),null,{default:g((function(){return[h(m(M),{class:"ion-text-bold"},{default:g((function(){return t[16]||(t[16]=[z("Indirizzo:")])})),_:1}),h(m(N),null,{default:g((function(){return[z(j(B.value.via)+" "+j(B.value.numeroCivico),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})])):A("",!0),C("section",fe,[h(m(_),{color:"danger",onClick:X},{default:g((function(){return t[17]||(t[17]=[z("Blocca Cliente")])})),_:1})]),C("section",de,[h(m(_),{color:"danger",expand:"block",onClick:t[1]||(t[1]=function(e){return W()})},{default:g((function(){return t[18]||(t[18]=[z("Elimina Prenotazione")])})),_:1})])])):A("",!0),h(m(G),{"is-open":Y.value,message:"Attendere..."},null,8,["is-open"])]})),_:1})]})),_:1},8,["is-open"])}}},ve=c(pe,[["__scopeId","data-v-385d70b4"]]),ge={class:"div-navigazione-mese"},he={class:"mese-titolo"},me=["onClick"],ye={key:0},xe=["onClick"],be={class:"div-informazioni-prenotazione"},ze={key:0},we={key:1,style:{"font-size":"small"}},_e={class:"popover-content"},Se={class:"prenotazione-details"},ke={__name:"PrenotazioniGestore",setup:function(r){var a=$(),c=l();Q();var s=B(),f=u(!1),d=Y(new Date),w=Y([]),I=Y(new Map),E=Y(new Set),D=Y(new Set),O=u(!1),P=u(null),L=u(""),M=Y(new Set),N=u(!1),T=a.getters.getIdDocumentNegozioGestore,U=u(""),H=u([]),q=u(0),le={isModalOpen:u(!1),openModal:function(){return ue.value=!0},closeModal:function(){return ue.value=!1}},ue=le.isModalOpen,se=le.openModal,fe=le.closeModal;function de(){return pe.apply(this,arguments)}function pe(){return(pe=i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ke=function(){var e=i(o().mark((function e(t,n,r){var a,l,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=10;break}return U.value=r,a=F(c,"Prenotazioni",r.id),e.next=5,ae(a,{new:!1});case 5:console.log("Prenotazione aggiornata, campo 'nuovo' impostato a false."),se(),console.log("prenotato aperto modal"),e.next=17;break;case 10:return l=[{text:"Annulla",cssClass:"alert-button-cancel"},{text:"Conferma",cssClass:"alert-button-confirm",handler:function(){var e=i(o().mark((function e(n){var r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n[0],a=n[1],e.next=4,Ae(r,a,t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}],u=[{type:"textarea",placeholder:"Inserisci il nome del cliente"},{type:"textarea",placeholder:"Inserisci eventuale descrizione"}],e.next=14,ie.create({header:"Inserisci manualmente la prenotazione",buttons:l,inputs:u});case 14:return s=e.sent,e.next=17,s.present();case 17:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function Ce(e){for(var t=e.getMonth(),n=e.getFullYear(),r=new Date(n,t,1),o=new Date(n,t+1,0),a=[];r<=o;){var i=new Intl.DateTimeFormat("it-IT",{weekday:"long"}).format(r),c={nomeGiornoSettimana:i.charAt(0).toUpperCase()+i.slice(1),numeroGiorno:r.getDate()};a.push(c),r.setDate(r.getDate()+1)}return a}function Ie(){return Ee.apply(this,arguments)}function Ee(){return(Ee=i(o().mark((function e(){var t,n,r,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f.value=!0,t=s.currentUser.uid,n=R(V(c,"Negozi"),W("proprietarioUid","==",t)),e.next=6,K(n);case 6:(r=e.sent).empty?console.error("Nessun documento trovato con uiduser"):(a=r.docs[0],i=a.data().orariLavorativi,I=new Map(Object.entries(i)),console.log("orariMap",I),I.forEach((function(e,t){I.set(t,e.sort(De))})),Oe(Pe(d))),f.value=!1,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),f.value=!1,console.error("Errore durante il recupero degli orari:",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function De(e,n){var r=t(e.split(":").map(Number),2),o=r[0],a=r[1],i=t(n.split(":").map(Number),2),c=i[0],l=i[1];return o!==c?o-c:a-l}function Oe(e){console.log("Funzione prendiOrariPergiorno chiamata con il giorno:",e),E.clear(),console.log("orariPerGiorno è stato svuotato.");var t=e.nomeGiornoSettimana;console.log("Nome del giorno della settimana:",t),I.forEach((function(e,n){n==t&&(console.log("Trovato ".concat(n," nella mappa degli orari con valori:"),e),e.forEach((function(e){console.log("Aggiungendo ora ".concat(e," per il giorno ").concat(t)),E.add(e)})))})),console.log("Orari per il giorno ".concat(t,":"),Array.from(E))}function Pe(e){var t=new Intl.DateTimeFormat("it-IT",{weekday:"long"}).format(e),n={nomeGiornoSettimana:t.charAt(0).toUpperCase()+t.slice(1),numeroGiorno:e.getDate()};return console.log(n),n}function Le(){return Me.apply(this,arguments)}function Me(){return Me=i(o().mark((function e(){var t,n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f.value=!0,D.clear(),H.value=[],console.log("Prenotazioni precedenti cancellate."),t=R(V(c,"Prenotazioni"),W("idDocumentNegozio","==",T),W("dataPrenotazione",">=",d),W("dataPrenotazione","<",new Date(d.getTime()+864e5))),n=R(V(c,"Prenotazioni"),W("idDocumentNegozio","==",T)),console.log("Esecuzione della query per recuperare tutte le prenotazioni."),e.next=10,K(n);case 10:return r=e.sent,console.log("Trovate ".concat(r.size," prenotazioni totali.")),r.forEach(function(){var e=i(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.data()).id=t.id,!0===n.new&&(H.value.push(n),console.log("Aggiunta nuova prenotazione: ".concat(JSON.stringify(n))));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),q.value=H.value.length,console.log("Numero di nuove prenotazioni: ".concat(q.value)),e.next=17,K(t);case 17:a=e.sent,console.log("Query prenotazioni:",a),a.forEach(function(){var e=i(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.data()).id=t.id,D.add(n),console.log("Aggiunta prenotazione al set: ".concat(JSON.stringify(n)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ne(D,E),console.log("Set delle prenotazioni creato."),O.value=!0,f.value=!1,console.log("Operazione completata con successo."),e.next=31;break;case 27:e.prev=27,e.t0=e.catch(0),f.value=!1,console.error("Errore durante il recupero delle prenotazioni:",e.t0);case 31:case"end":return e.stop()}}),e,null,[[0,27]])}))),Me.apply(this,arguments)}function Ne(e,t){console.log("Inizio creazione set oggetti orario."),M.clear();var r,o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){l=!0,i=e},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw i}}}}(t);try{var a=function(){var t=r.value;console.log("Verifica orario: ".concat(t));var n=Array.from(e).find((function(e){return e.oraInizio==t}));if(n)console.log("Trovata prenotazione per orario ".concat(t,":"),n),function(e){var t=e.durataServizioSelezionato;console.log("durata",t);for(var n=t/15,r=0;r<n;r++){var o={prenotato:!0,oraInizio:Be(e.oraInizio,15*r),sceltaUtente:e.servizioSelezionato,nomeCliente:e.nomeCliente,prenotazione:e,new:e.new};je(o.oraInizio)||M.add(o)}console.log("Prenotazione orari consecutivi:",Array.from(M))}(n);else{console.log("Nessuna prenotazione trovata per orario ".concat(t,". Creazione nuovo oggetto orario."));var o={prenotato:!1,oraInizio:t,sceltaUtente:"",nomeCliente:"",prenotazione:""};je(o.oraInizio)?console.log("Orario ".concat(t," già presente in setOggettiOrario.")):(M.add(o),console.log("Orario ".concat(t," aggiunto a setOggettiOrario.")))}};for(o.s();!(r=o.n()).done;)a()}catch(i){o.e(i)}finally{o.f()}console.log("Set oggetti orario creato:",Array.from(M))}function je(e){return Array.from(M).some((function(t){return t.oraInizio===e}))}function Ae(e,t,n){return Ge.apply(this,arguments)}function Ge(){return(Ge=i(o().mark((function e(t,n,r){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={dataPrenotazione:d,idDocumentNegozio:T,oraInizio:r,nomeCliente:t,servizioSelezionato:n,durataServizioSelezionato:15},e.next=4,ce(V(c,"Prenotazioni"),a);case 4:return console.log("Prenotazione inserita:",a),e.next=7,Ie();case 7:return e.next=9,Le();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Errore durante l'inserimento della prenotazione:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var Te=function(e){return e<10?"0".concat(e):e.toString()};function Fe(e){return Ue.apply(this,arguments)}function Ue(){return(Ue=i(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O.value=!1,(n=new Date(d)).setMonth(n.getMonth()+t),d=n,L=new Intl.DateTimeFormat("it-IT",{month:"long"}).format(d),w=Ce(d),e.next=8,Ie();case 8:return e.next=10,Le();case 10:O.value=!0,He(d.getDate()),console.log("Mese spostato a ".concat(L,", giorni del mese:"),w);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(e){if(P.value){var t=P.value,n=t.children[e];if(n){var r=n.offsetLeft-t.offsetLeft-300;t.scrollLeft=r,console.log("Scroll effettuato a ".concat(e," giorno del mese."))}}}function qe(){return(qe=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.setDate(t.numeroGiorno),w=Ce(d),e.next=4,Ie();case 4:return e.next=6,Le();case 6:console.log("Giorno ".concat(d.toLocaleDateString()," cliccato."));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e,n){var r=t(e.split(":").map(Number),2),o=r[0],a=r[1],i=new Date;return i.setHours(o),i.setMinutes(a+n),"".concat(String(i.getHours()).padStart(2,"0"),":").concat(String(i.getMinutes()).padStart(2,"0"))}function Ye(t){if(!t||"object"!==e(t))return"Data non valida";var n=1e3*t.seconds+Math.floor(t.nanoseconds/1e6),r=new Date(n),o=String(r.getDate()).padStart(2,"0"),a=String(r.getMonth()+1).padStart(2,"0"),i=r.getFullYear(),c=String(r.getHours()).padStart(2,"0"),l=String(r.getMinutes()).padStart(2,"0");return"".concat(o,"/").concat(a,"/").concat(i," ore ").concat(c,":").concat(l)}return J(i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.setHours(0,0,0,0),L=new Intl.DateTimeFormat("it-IT",{month:"long"}).format(d),w=Ce(d),e.next=5,Ie();case 5:return e.next=7,Le();case 7:He(d.getDate()),console.log("IonViewDidEnter eseguito con successo.");case 9:case"end":return e.stop()}}),e)})))),function(e,n){return p(),v(m(re),null,{default:g((function(){return[h(m(y),null,{default:g((function(){return[h(m(x),{color:"primary"},{default:g((function(){return[h(m(b),null,{default:g((function(){return n[4]||(n[4]=[z("Prenotazioni")])})),_:1}),h(m(G),{"is-open":f.value,message:"Please wait..."},null,8,["is-open"])]})),_:1})]})),_:1}),h(m(S),{class:"ion-padding"},{default:g((function(){return[C("div",ge,[h(m(_),{onClick:n[0]||(n[0]=function(e){return Fe(-1)}),class:"button-avanti-indietro"},{default:g((function(){return n[5]||(n[5]=[z("Indietro")])})),_:1}),C("p",he,j(m(L)),1),h(m(_),{onClick:n[1]||(n[1]=function(e){return Fe(1)}),class:"button-avanti-indietro"},{default:g((function(){return n[6]||(n[6]=[z("Avanti")])})),_:1}),h(m(X),{color:"warning",onClick:n[2]||(n[2]=function(e){N.value=!0})},{default:g((function(){return[z(" Hai "+j(m(q))+" nuove prenotazioni ",1)]})),_:1})]),C("div",{class:"div-contenitore-giorni",ref_key:"contenitoreGiorni",ref:P},[(p(!0),k(ee,null,Z(m(w),(function(e,t){return p(),k("div",{class:oe(["div-giorno",{"giorno-selezionato":m(d).getDate()===e.numeroGiorno}]),key:t,onClick:function(t){return function(e){return qe.apply(this,arguments)}(e)}},j(e.nomeGiornoSettimana)+" "+j(e.numeroGiorno),11,me)})),128))],512),m(O)?(p(),k("div",ye,[(p(!0),k(ee,null,Z(M,(function(e,r){return p(),k("div",{key:r,class:"div-contenitore-orario",onClick:function(t){return ke(e.oraInizio,e.prenotato,e.prenotazione)}},[C("div",{class:oe({"div-orario":0==e.prenotato,"div-orario-prenotato":1==e.prenotato})},j(e.oraInizio)+" / "+j((o=e.oraInizio,a=15,i=t(o.split(":").map(Number),2),c=i[0],l=i[1],u=new Date,u.setHours(c),u.setMinutes(l+a),"".concat(Te(u.getHours()),":").concat(Te(u.getMinutes())))),3),C("div",be,[e.prenotato?(p(),k("div",ze,j(e.nomeCliente),1)):A("",!0),e.prenotato?(p(),k("div",we,j(e.sceltaUtente),1)):A("",!0)]),e.new?(p(),v(m(X),{key:0,color:"warning"},{default:g((function(){return n[7]||(n[7]=[z("New")])})),_:1})):A("",!0)],8,xe);var o,a,i,c,l,u})),128))])):A("",!0)]})),_:1}),h(m(ne),{"is-open":m(N),onIonPopoverDidDismiss:n[3]||(n[3]=function(e){return te(N)?N.value=!1:N=!1})},{default:g((function(){return[C("div",_e,[n[10]||(n[10]=C("h3",null,"Nuove Prenotazioni",-1)),C("ul",null,[(p(!0),k(ee,null,Z(m(H),(function(e,t){return p(),k("li",{key:t,class:"prenotazione-item"},[C("div",Se,[C("strong",null," Data: "+j(Ye(e.dataPrenotazione)),1),n[8]||(n[8]=C("br",null,null,-1)),C("span",null,j(e.nomeCliente)+" "+j(e.cognomeCliente),1),n[9]||(n[9]=C("br",null,null,-1)),C("span",null,"Servizio: "+j(e.servizioSelezionato),1)])])})),128))])])]})),_:1},8,["is-open"]),h(ve,{"is-open":m(ue),prenotazioneSelected:U.value,onCloseModal:m(fe),onRicaricaOrari:de},null,8,["is-open","prenotazioneSelected","onCloseModal"])]})),_:1})}}};r("default",c(ke,[["__scopeId","data-v-47f1b6f8"]]))}}}))}();
