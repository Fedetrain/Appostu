!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return n};var t,n={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},l="function"==typeof Symbol?Symbol:{},c=l.iterator||"@@iterator",u=l.asyncIterator||"@@asyncIterator",s=l.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(t){f=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof x?t:x,a=Object.create(o.prototype),l=new L(r||[]);return i(a,"_invoke",{value:D(e,n,l)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=d;var v="suspendedStart",g="suspendedYield",m="executing",h="completed",y={};function x(){}function w(){}function b(){}var z={};f(z,c,(function(){return this}));var _=Object.getPrototypeOf,S=_&&_(_(M([])));S&&S!==r&&a.call(S,c)&&(z=S);var k=b.prototype=x.prototype=Object.create(z);function I(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function E(t,n){function r(o,i,l,c){var u=p(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==e(f)&&a.call(f,"__await")?n.resolve(f.__await).then((function(e){r("next",e,l,c)}),(function(e){r("throw",e,l,c)})):n.resolve(f).then((function(e){s.value=e,l(s)}),(function(e){return r("throw",e,l,c)}))}c(u.arg)}var o;i(this,"_invoke",{value:function(e,t){function a(){return new n((function(n,o){r(e,t,n,o)}))}return o=o?o.then(a,a):a()}})}function D(e,n,r){var o=v;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:t,done:!0}}for(r.method=a,r.arg=i;;){var l=r.delegate;if(l){var c=O(l,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===v)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=p(e,n,r);if("normal"===u.type){if(o=r.done?h:g,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=h,r.method="throw",r.arg=u.arg)}}}function O(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=p(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function M(n){if(n||""===n){var r=n[c];if(r)return r.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var o=-1,i=function e(){for(;++o<n.length;)if(a.call(n,o))return e.value=n[o],e.done=!1,e;return e.value=t,e.done=!0,e};return i.next=i}}throw new TypeError(e(n)+" is not iterable")}return w.prototype=b,i(k,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=f(b,s,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,f(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},n.awrap=function(e){return{__await:e}},I(E.prototype),f(E.prototype,u,(function(){return this})),n.AsyncIterator=E,n.async=function(e,t,r,o,a){void 0===a&&(a=Promise);var i=new E(d(e,t,r,o),a);return n.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},I(k),f(k,s,"Generator"),f(k,c,(function(){return this})),f(k,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=M,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,o){return l.type="throw",l.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:M(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},n}function a(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function l(e){a(i,r,o,l,c,"next",e)}function c(e){a(i,r,o,l,c,"throw",e)}l(void 0)}))}}function l(e){throw new TypeError('"'+e+'" is read-only')}System.register(["./index-legacy-BhscvHcK.js"],(function(r,a){"use strict";var c,u,s,f,d,p,v,g,m,h,y,x,w,b,z,_,S,k,I,E,D,O,P,C,L,M,N,j,A,G,T,F,U,H,Y,J,$,q,Q,R,V,W,K,B,X,Z,ee,te,ne,re,oe,ae,ie,le;return{setters:[function(e){c=e._,u=e.a,s=e.r,f=e.o,d=e.a5,p=e.a6,v=e.n,g=e.d,m=e.p,h=e.s,y=e.u,x=e.y,w=e.I,b=e.v,z=e.x,_=e.a7,S=e.a2,k=e.t,I=e.H,E=e.L,D=e.N,O=e.O,P=e.Q,C=e.z,L=e.J,M=e.R,N=e.a8,j=e.a9,A=e.P,G=e.D,T=e.aa,F=e.G,U=e.l,H=e.m,Y=e.a1,J=e.b,$=e.ab,q=e.U,Q=e.f,R=e.e,V=e.q,W=e.i,K=e.w,B=e.h,X=e.ac,Z=e.E,ee=e.F,te=e.ad,ne=e.ae,re=e.K,oe=e.af,ae=e.ag,ie=e.a0,le=e.ah}],execute:function(){var a=document.createElement("style");a.textContent="ion-card[data-v-fd768a41]{margin:auto}ion-card-title[data-v-fd768a41]{font-size:1.5rem}ion-card-content[data-v-fd768a41]{text-align:center}ion-modal[data-v-fd768a41]{--height: 80%;--width: 90%;--border-radius: 16px;--box-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1)}ion-modal[data-v-fd768a41]::part(backdrop){background:#d1d5db;opacity:1}ion-list[data-v-fd768a41]{padding:0}ion-item[data-v-fd768a41]{--ion-item-background: transparent;--ion-item-text: #333;display:flex;flex-direction:column;flex-wrap:wrap-reverse}ion-label.ion-text-bold[data-v-fd768a41]{font-weight:700}ion-button[data-v-fd768a41]{margin-top:1rem}.modal-content[data-v-fd768a41]{display:flex;flex-direction:column;align-items:center}.modal-top[data-v-fd768a41],.modal-bottom[data-v-fd768a41]{width:100%}.popover-content[data-v-624691ed]{padding:16px;font-family:Arial,sans-serif}.prenotazione-item[data-v-624691ed]{margin-bottom:12px;padding:10px;border:1px solid #e0e0e0;border-radius:5px;background-color:#f9f9f9}.prenotazione-details[data-v-624691ed]{font-size:14px;color:#333}.div-contenitore-giorni[data-v-624691ed]{display:flex;overflow:scroll}.div-contenitore-orario[data-v-624691ed]{display:flex;align-items:center;box-shadow:0 2px 4px var(--ion-color-secondary);border-radius:10px;margin-top:10px;justify-content:stretch;align-content:stretch}.div-orario[data-v-624691ed]{border-radius:10px;display:flex;align-items:center;padding:5px;background-color:#9acd32;min-height:50px;font-size:small;text-align:center}.div-giorno[data-v-624691ed]{display:flex;flex-direction:column;justify-content:space-between;margin:5px;text-align:center;min-height:50px;cursor:pointer;border-radius:8px;padding:10px;box-shadow:0 2px 4px var(--ion-color-secondary);transition:background-color .3s ease}.giorno-selezionato[data-v-624691ed]{display:flex;flex-direction:column;justify-content:space-between;background-color:var(--ion-color-secondary);margin:5px;text-align:center;min-height:50px;cursor:pointer;border-radius:8px;padding:10px;box-shadow:0 2px 4px rgba(0,0,0,.1);transition:background-color .3s ease}.div-orario-prenotato[data-v-624691ed]{border-radius:10px;display:flex;padding:5px;align-items:center;font-size:small;background-color:#cd3232;min-height:50px;text-align:center}.div-navigazione-mese[data-v-624691ed]{margin-top:10px;display:flex;flex-direction:row;justify-content:left;align-items:flex-start}.mese-titolo[data-v-624691ed]{font-size:x-large;font-weight:700;margin-top:0}.div-informazioni-prenotazione[data-v-624691ed]{display:flex;flex-direction:column;align-items:center;width:70%}.button-avanti-indietro[data-v-624691ed]{margin-top:0;width:15%;font-size:x-small;height:min-content}\n/*$vite$:1*/",document.head.appendChild(a);var ce={class:"modal-top"},ue={key:0,class:"modal-bottom"},se={__name:"AlertInformazioniPrenotazione",props:["isOpen","prenotazioneSelected"],emits:["close-modal","ricarica-orari"],setup:function(e,t){var n=t.emit,r=e,a=n,c=u(),J=s(null),$=s(!1);f((function(){console.log("Modal montato")})),d((function(){console.log("Modal smontato")}));var q=function(){console.log("Modal sta per essere presentato")},Q=function(){console.log("Modal è stato presentato")},R=function(){console.log("Modal sta per essere chiuso"),B()},V=function(){console.log("Modal è stato chiuso")};p((function(){r.prenotazioneSelected&&W()}));var W=function(){var e=i(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,$.value=!0,t=U(c,"Cliente",r.prenotazioneSelected.idDocumentCliente),e.next=5,H(t);case 5:(n=e.sent).exists()?(J.value=n.data(),console.log(J.value)):J.value=null,l("isOpenLoading"),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Errore nel recupero delle informazioni del cliente:",e.t0),J.value=null,$.value=!1;case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=i(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,$.value=!0,t=U(c,"Prenotazioni",r.prenotazioneSelected.id),e.next=5,Y(t);case 5:console.log("Prenotazione eliminata con successo"),B(),a("ricarica-orari"),$.value=!1,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Errore durante l'eliminazione della prenotazione:",e.t0),$.value=!1;case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),B=function(){a("close-modal")};return function(e,t){return v(),g(y(F),{"is-open":r.isOpen,onClose:t[2]||(t[2]=function(e){return B()}),"backdrop-dismiss":"true",onIonModalWillPresent:q,onIonModalDidPresent:Q,onIonModalWillDismiss:R,onIonModalDidDismiss:V},{default:m((function(){return[h(y(x),null,{default:m((function(){return[h(y(w),{color:"primary"},{default:m((function(){return[h(y(b),null,{default:m((function(){return t[3]||(t[3]=[z("Il mio Modal")])})),_:1}),h(y(_),{slot:"end"},{default:m((function(){return[h(y(S),{onClick:t[0]||(t[0]=function(e){return B()})},{default:m((function(){return t[4]||(t[4]=[z("close")])})),_:1})]})),_:1}),h(y(k),{"is-open":$.value,message:"Please wait..."},null,8,["is-open"])]})),_:1})]})),_:1}),h(y(I),{class:"ion-padding"},{default:m((function(){return[r.prenotazioneSelected?(v(),g(y(E),{key:0},{default:m((function(){return[h(y(D),null,{default:m((function(){return[h(y(O),{class:"ion-text-center"},{default:m((function(){return t[5]||(t[5]=[z("Dettagli Prenotazione")])})),_:1})]})),_:1}),h(y(P),{class:"modal-content"},{default:m((function(){return[C("div",ce,[h(y(L),null,{default:m((function(){return[h(y(M),null,{default:m((function(){return[h(y(N),{class:"ion-text-bold"},{default:m((function(){return t[6]||(t[6]=[z("Servizio:")])})),_:1}),h(y(j),null,{default:m((function(){return[z(A(r.prenotazioneSelected.servizioSelezionato),1)]})),_:1})]})),_:1}),h(y(M),null,{default:m((function(){return[h(y(N),{class:"ion-text-bold"},{default:m((function(){return t[7]||(t[7]=[z("Durata:")])})),_:1}),h(y(j),null,{default:m((function(){return[z(A(r.prenotazioneSelected.durataServizioSelezionato)+" minuti",1)]})),_:1})]})),_:1}),h(y(M),null,{default:m((function(){return[h(y(N),{class:"ion-text-bold"},{default:m((function(){return t[8]||(t[8]=[z("Ora Inizio:")])})),_:1}),h(y(j),null,{default:m((function(){return[z(A(r.prenotazioneSelected.oraInizio),1)]})),_:1})]})),_:1}),h(y(M),null,{default:m((function(){return[h(y(N),{class:"ion-text-bold"},{default:m((function(){return t[9]||(t[9]=[z("Ora Fine:")])})),_:1}),h(y(j),null,{default:m((function(){return[z(A(r.prenotazioneSelected.oraFine),1)]})),_:1})]})),_:1}),h(y(M),null,{default:m((function(){return[h(y(N),{class:"ion-text-bold"},{default:m((function(){return t[10]||(t[10]=[z("Commento:")])})),_:1}),h(y(j),null,{default:m((function(){return[z(A(r.prenotazioneSelected.commento),1)]})),_:1})]})),_:1})]})),_:1})]),J.value?(v(),G("div",ue,[h(y(L),null,{default:m((function(){return[h(y(M),null,{default:m((function(){return[h(y(N),{class:"ion-text-bold"},{default:m((function(){return t[11]||(t[11]=[z("Cliente:")])})),_:1}),h(y(j),null,{default:m((function(){return[z(A(J.value.nome)+" "+A(J.value.cognome),1)]})),_:1})]})),_:1}),h(y(M),null,{default:m((function(){return[h(y(N),{class:"ion-text-bold"},{default:m((function(){return t[12]||(t[12]=[z("Cellulare Cliente:")])})),_:1}),h(y(j),null,{default:m((function(){return[z(A(J.value.cellulare),1)]})),_:1})]})),_:1}),h(y(M),null,{default:m((function(){return[h(y(N),{class:"ion-text-bold"},{default:m((function(){return t[13]||(t[13]=[z("Email Cliene:")])})),_:1}),h(y(j),null,{default:m((function(){return[z(A(J.value.email),1)]})),_:1})]})),_:1})]})),_:1})])):T("",!0),h(y(S),{color:"danger",onClick:t[1]||(t[1]=function(e){return K()})},{default:m((function(){return t[14]||(t[14]=[z("Elimina Prenotazione")])})),_:1})]})),_:1})]})),_:1})):T("",!0)]})),_:1})]})),_:1},8,["is-open"])}}},fe=c(se,[["__scopeId","data-v-fd768a41"]]),de={class:"div-navigazione-mese"},pe={class:"mese-titolo"},ve=["onClick"],ge={key:0},me=["onClick"],he={class:"div-informazioni-prenotazione"},ye={key:0},xe={key:1,style:{"font-size":"small"}},we={class:"popover-content"},be={class:"prenotazione-details"},ze={__name:"PrenotazioniGestore",setup:function(r){var a=Q(),l=u();R();var c=J(),f=s(!1),d=$(new Date),p=$([]),_=$(new Map),E=$(new Set),D=$(new Set),O=s(!1),P=s(null),L=s(""),M=$(new Set),N=s(!1),j=a.getters.getIdDocumentNegozioGestore,F=s(""),H=s([]),Y=s(0),ce={isModalOpen:s(!1),openModal:function(){return ue.value=!0},closeModal:function(){return ue.value=!1}},ue=ce.isModalOpen,se=ce.openModal,ze=ce.closeModal;function _e(){return Se.apply(this,arguments)}function Se(){return(Se=i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ke=function(){var e=i(o().mark((function e(t,n,r){var a,c,u,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=10;break}return F.value=r,a=U(l,"Prenotazioni",r.id),e.next=5,ae(a,{new:!1});case 5:console.log("Prenotazione aggiornata, campo 'nuovo' impostato a false."),se(),console.log("prenotato aperto modal"),e.next=17;break;case 10:return c=[{text:"Annulla",cssClass:"alert-button-cancel"},{text:"Conferma",cssClass:"alert-button-confirm",handler:function(){var e=i(o().mark((function e(n){var r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n[0],a=n[1],e.next=4,Ae(r,a,t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}],u=[{type:"textarea",placeholder:"Inserisci nome cliente"},{type:"textarea",placeholder:"Inserisci scelta utente"}],e.next=14,ie.create({header:"Inserisci manualmente la prenotazione",buttons:c,inputs:u});case 14:return s=e.sent,e.next=17,s.present();case 17:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function Ie(e){for(var t=e.getMonth(),n=e.getFullYear(),r=new Date(n,t,1),o=new Date(n,t+1,0),a=[];r<=o;){var i=new Intl.DateTimeFormat("it-IT",{weekday:"long"}).format(r),l={nomeGiornoSettimana:i.charAt(0).toUpperCase()+i.slice(1),numeroGiorno:r.getDate()};a.push(l),r.setDate(r.getDate()+1)}return a}function Ee(){return De.apply(this,arguments)}function De(){return(De=i(o().mark((function e(){var t,n,r,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f.value=!0,t=c.currentUser.uid,n=V(W(l,"Negozi"),K("proprietarioUid","==",t)),e.next=6,B(n);case 6:(r=e.sent).empty?console.error("Nessun documento trovato con uiduser"):(a=r.docs[0],i=a.data().orariLavorativi,_=new Map(Object.entries(i)),console.log("orariMap",_),_.forEach((function(e,t){_.set(t,e.sort(Oe))})),Pe(Ce(d))),f.value=!1,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),f.value=!1,console.error("Errore durante il recupero degli orari:",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function Oe(e,n){var r=t(e.split(":").map(Number),2),o=r[0],a=r[1],i=t(n.split(":").map(Number),2),l=i[0],c=i[1];return o!==l?o-l:a-c}function Pe(e){console.log("Funzione prendiOrariPergiorno chiamata con il giorno:",e),E.clear(),console.log("orariPerGiorno è stato svuotato.");var t=e.nomeGiornoSettimana;console.log("Nome del giorno della settimana:",t),_.forEach((function(e,n){n==t&&(console.log("Trovato ".concat(n," nella mappa degli orari con valori:"),e),e.forEach((function(e){console.log("Aggiungendo ora ".concat(e," per il giorno ").concat(t)),E.add(e)})))})),console.log("Orari per il giorno ".concat(t,":"),Array.from(E))}function Ce(e){var t=new Intl.DateTimeFormat("it-IT",{weekday:"long"}).format(e),n={nomeGiornoSettimana:t.charAt(0).toUpperCase()+t.slice(1),numeroGiorno:e.getDate()};return console.log(n),n}function Le(){return Me.apply(this,arguments)}function Me(){return Me=i(o().mark((function e(){var t,n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f.value=!0,D.clear(),H.value=[],console.log("Prenotazioni precedenti cancellate."),t=V(W(l,"Prenotazioni"),K("idDocumentNegozio","==",j),K("dataPrenotazione",">=",d),K("dataPrenotazione","<",new Date(d.getTime()+864e5))),n=V(W(l,"Prenotazioni"),K("idDocumentNegozio","==",j)),console.log("Esecuzione della query per recuperare tutte le prenotazioni."),e.next=10,B(n);case 10:return r=e.sent,console.log("Trovate ".concat(r.size," prenotazioni totali.")),r.forEach(function(){var e=i(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.data()).id=t.id,!0===n.new&&(H.value.push(n),console.log("Aggiunta nuova prenotazione: ".concat(JSON.stringify(n))));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Y.value=H.value.length,console.log("Numero di nuove prenotazioni: ".concat(Y.value)),e.next=17,B(t);case 17:a=e.sent,console.log("Query prenotazioni:",a),a.forEach(function(){var e=i(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.data()).id=t.id,D.add(n),console.log("Aggiunta prenotazione al set: ".concat(JSON.stringify(n)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ne(D,E),console.log("Set delle prenotazioni creato."),O.value=!0,f.value=!1,console.log("Operazione completata con successo."),e.next=31;break;case 27:e.prev=27,e.t0=e.catch(0),f.value=!1,console.error("Errore durante il recupero delle prenotazioni:",e.t0);case 31:case"end":return e.stop()}}),e,null,[[0,27]])}))),Me.apply(this,arguments)}function Ne(e,t){console.log("Inizio creazione set oggetti orario."),M.clear();var r,o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){c=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(c)throw i}}}}(t);try{var a=function(){var t=r.value;console.log("Verifica orario: ".concat(t));var n=Array.from(e).find((function(e){return e.oraInizio==t}));if(n)console.log("Trovata prenotazione per orario ".concat(t,":"),n),function(e){var t=e.durataServizioSelezionato;console.log("durata",t);for(var n=t/15,r=0;r<n;r++){var o={prenotato:!0,oraInizio:Je(e.oraInizio,15*r),sceltaUtente:e.servizioSelezionato,nomeCliente:e.nomeCliente,prenotazione:e,new:e.new};je(o.oraInizio)||M.add(o)}console.log("Prenotazione orari consecutivi:",Array.from(M))}(n);else{console.log("Nessuna prenotazione trovata per orario ".concat(t,". Creazione nuovo oggetto orario."));var o={prenotato:!1,oraInizio:t,sceltaUtente:"",nomeCliente:"",prenotazione:""};je(o.oraInizio)?console.log("Orario ".concat(t," già presente in setOggettiOrario.")):(M.add(o),console.log("Orario ".concat(t," aggiunto a setOggettiOrario.")))}};for(o.s();!(r=o.n()).done;)a()}catch(i){o.e(i)}finally{o.f()}console.log("Set oggetti orario creato:",Array.from(M))}function je(e){return Array.from(M).some((function(t){return t.oraInizio===e}))}function Ae(e,t,n){return Ge.apply(this,arguments)}function Ge(){return(Ge=i(o().mark((function e(t,n,r){var a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={dataPrenotazione:d,idDocumentNegozio:j,oraInizio:r,nomeCliente:t,servizioSelezionato:n,durataServizioSelezionato:15},e.next=4,le(W(l,"Prenotazioni"),a);case 4:return console.log("Prenotazione inserita:",a),e.next=7,Ee();case 7:return e.next=9,Le();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Errore durante l'inserimento della prenotazione:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var Te=function(e){return e<10?"0".concat(e):e.toString()};function Fe(e){return Ue.apply(this,arguments)}function Ue(){return(Ue=i(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O.value=!1,(n=new Date(d)).setMonth(n.getMonth()+t),d=n,L=new Intl.DateTimeFormat("it-IT",{month:"long"}).format(d),p=Ie(d),e.next=8,Ee();case 8:return e.next=10,Le();case 10:O.value=!0,He(d.getDate()),console.log("Mese spostato a ".concat(L,", giorni del mese:"),p);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(e){if(P.value){var t=P.value,n=t.children[e];if(n){var r=n.offsetLeft-t.offsetLeft-300;t.scrollLeft=r,console.log("Scroll effettuato a ".concat(e," giorno del mese."))}}}function Ye(){return(Ye=i(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.setDate(t.numeroGiorno),p=Ie(d),e.next=4,Ee();case 4:return e.next=6,Le();case 6:console.log("Giorno ".concat(d.toLocaleDateString()," cliccato."));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(e,n){var r=t(e.split(":").map(Number),2),o=r[0],a=r[1],i=new Date;return i.setHours(o),i.setMinutes(a+n),"".concat(String(i.getHours()).padStart(2,"0"),":").concat(String(i.getMinutes()).padStart(2,"0"))}function $e(t){if(!t||"object"!==e(t))return"Data non valida";var n=1e3*t.seconds+Math.floor(t.nanoseconds/1e6),r=new Date(n),o=String(r.getDate()).padStart(2,"0"),a=String(r.getMonth()+1).padStart(2,"0"),i=r.getFullYear(),l=String(r.getHours()).padStart(2,"0"),c=String(r.getMinutes()).padStart(2,"0");return"".concat(o,"/").concat(a,"/").concat(i," ore ").concat(l,":").concat(c)}return q(i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.setHours(0,0,0,0),L=new Intl.DateTimeFormat("it-IT",{month:"long"}).format(d),p=Ie(d),e.next=5,Ee();case 5:return e.next=7,Le();case 7:He(d.getDate()),console.log("IonViewDidEnter eseguito con successo.");case 9:case"end":return e.stop()}}),e)})))),function(e,n){return v(),g(y(re),null,{default:m((function(){return[h(y(x),null,{default:m((function(){return[h(y(w),{color:"primary"},{default:m((function(){return[h(y(b),null,{default:m((function(){return n[4]||(n[4]=[z("Prenotazioni")])})),_:1}),h(y(k),{"is-open":f.value,message:"Please wait..."},null,8,["is-open"])]})),_:1})]})),_:1}),h(y(I),{class:"ion-padding"},{default:m((function(){return[C("div",de,[h(y(S),{onClick:n[0]||(n[0]=function(e){return Fe(-1)}),class:"button-avanti-indietro"},{default:m((function(){return n[5]||(n[5]=[z("Indietro")])})),_:1}),C("p",pe,A(y(L)),1),h(y(S),{onClick:n[1]||(n[1]=function(e){return Fe(1)}),class:"button-avanti-indietro"},{default:m((function(){return n[6]||(n[6]=[z("Avanti")])})),_:1}),h(y(X),{color:"warning",onClick:n[2]||(n[2]=function(e){N.value=!0})},{default:m((function(){return[z(" Hai "+A(y(Y))+" nuove prenotazioni ",1)]})),_:1})]),C("div",{class:"div-contenitore-giorni",ref_key:"contenitoreGiorni",ref:P},[(v(!0),G(ee,null,Z(y(p),(function(e,t){return v(),G("div",{class:oe(["div-giorno",{"giorno-selezionato":y(d).getDate()===e.numeroGiorno}]),key:t,onClick:function(t){return function(e){return Ye.apply(this,arguments)}(e)}},A(e.nomeGiornoSettimana)+" "+A(e.numeroGiorno),11,ve)})),128))],512),y(O)?(v(),G("div",ge,[(v(!0),G(ee,null,Z(M,(function(e,r){return v(),G("div",{key:r,class:"div-contenitore-orario",onClick:function(t){return ke(e.oraInizio,e.prenotato,e.prenotazione)}},[C("div",{class:oe({"div-orario":0==e.prenotato,"div-orario-prenotato":1==e.prenotato})},A(e.oraInizio)+" / "+A((o=e.oraInizio,a=15,i=t(o.split(":").map(Number),2),l=i[0],c=i[1],u=new Date,u.setHours(l),u.setMinutes(c+a),"".concat(Te(u.getHours()),":").concat(Te(u.getMinutes())))),3),C("div",he,[e.prenotato?(v(),G("div",ye,A(e.nomeCliente),1)):T("",!0),e.prenotato?(v(),G("div",xe,A(e.sceltaUtente),1)):T("",!0)]),e.new?(v(),g(y(X),{key:0,color:"warning"},{default:m((function(){return n[7]||(n[7]=[z("New")])})),_:1})):T("",!0)],8,me);var o,a,i,l,c,u})),128))])):T("",!0)]})),_:1}),h(y(ne),{"is-open":y(N),onIonPopoverDidDismiss:n[3]||(n[3]=function(e){return te(N)?N.value=!1:N=!1})},{default:m((function(){return[C("div",we,[n[10]||(n[10]=C("h3",null,"Nuove Prenotazioni",-1)),C("ul",null,[(v(!0),G(ee,null,Z(y(H),(function(e,t){return v(),G("li",{key:t,class:"prenotazione-item"},[C("div",be,[C("strong",null," Data: "+A($e(e.dataPrenotazione)),1),n[8]||(n[8]=C("br",null,null,-1)),C("span",null,A(e.nomeCliente)+" "+A(e.cognomeCliente),1),n[9]||(n[9]=C("br",null,null,-1)),C("span",null,"Servizio: "+A(e.servizioSelezionato),1)])])})),128))])])]})),_:1},8,["is-open"]),h(fe,{"is-open":y(ue),prenotazioneSelected:F.value,onCloseModal:y(ze),onRicaricaOrari:_e},null,8,["is-open","prenotazioneSelected","onCloseModal"])]})),_:1})}}};r("default",c(ze,[["__scopeId","data-v-624691ed"]]))}}}))}();
